#!/bin/bash
#
# Script to test pascals
#
echo -n compiling pascals ...
#
compile sample_programs/pascals
#
# Prepare a prd deck that has the pascals intermediate first, followed by the
# program to run.
#
cat sample_programs/pascals.pint sample_programs/roman.pas > sample_programs/tmp.pint
rm sample_programs/pascals.pint
cp sample_programs/tmp.pint sample_programs/pascals.pint > tmp
rm sample_programs/tmp.pint
#
echo -n running ...
#
run sample_programs/pascals
#
echo -n compare to reference ...
diffnole sample_programs/pascals.lst sample_programs/pascals.cmp > sample_programs/pascals.dif
#
## pass if diff file is empty
if test -s pascals.dif; then
    echo FAIL
else
    echo PASS
fi
